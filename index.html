<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Frog Clicker iPad Fix</title>
    <style>
        :root { --grass: #7cfc00; --wood: #5d4037; --ui: rgba(0,0,0,0.9); --machine: #ff4757; }
        body { margin: 0; padding: 0; font-family: sans-serif; background: #2c3e50; color: white; overflow: hidden; touch-action: none; }

        /* Spillomr√•de */
        #game-screen { position: absolute; width: 100vw; height: 100vh; background: var(--grass); display: block; }

        /* Merge Machine - Stor og tydelig boks midt i bildet */
        #merge-zone {
            position: absolute; left: 60%; top: 50%; transform: translate(-50%, -50%);
            width: 300px; height: 300px; border: 8px dashed var(--machine); border-radius: 30px;
            background: rgba(255, 71, 87, 0.2); display: flex; align-items: center; justify-content: center;
            font-weight: bold; color: white; font-size: 24px; z-index: 1; pointer-events: none;
        }

        /* Frosken - Stor og enkel √• ta p√• */
        .frog {
            position: absolute; width: 120px; height: 120px;
            font-size: 80px; display: flex; align-items: center; justify-content: center;
            z-index: 10; cursor: pointer; transition: transform 0.1s;
            user-select: none; -webkit-user-select: none;
        }
        .lvl-tag { position: absolute; bottom: 0; right: 0; font-size: 18px; background: black; color: gold; padding: 2px 8px; border-radius: 10px; }

        /* Sidebar */
        #sidebar { 
            position: absolute; left: 0; top: 0; width: 260px; height: 100%; 
            background: var(--ui); border-right: 5px solid var(--wood); z-index: 100; 
            display: flex; flex-direction: column; 
        }
        .tabs { display: flex; height: 60px; }
        .tab-btn { flex: 1; border: none; background: #3e2723; color: white; font-weight: bold; font-size: 16px; }
        .tab-btn.active { background: #8d6e63; }

        .content { flex: 1; overflow-y: scroll; padding: 15px; -webkit-overflow-scrolling: touch; }
        
        /* Shop Layout */
        .section-header { color: #f1c40f; text-transform: uppercase; font-size: 14px; margin: 20px 0 10px 0; border-bottom: 2px solid #555; }
        .item { background: #333; padding: 15px; margin-bottom: 10px; border-radius: 10px; border-left: 5px solid #f1c40f; font-size: 14px; }

        #stats { position: absolute; top: 20px; right: 20px; background: rgba(0,0,0,0.7); padding: 15px 25px; border-radius: 50px; font-size: 24px; z-index: 110; border: 2px solid white; }
    </style>
</head>
<body>

    <div id="game-screen">
        <div id="stats">Clicks: <span id="count">0</span></div>
        <div id="merge-zone">MERGE MACHINE</div>

        <div id="sidebar">
            <div class="tabs">
                <button id="btn-shop" class="tab-btn active" onclick="showTab('shop')">SHOP</button>
                <button id="btn-log" class="tab-btn" onclick="showTab('log')">LOG</button>
            </div>
            
            <div id="tab-shop" class="content" style="display: block;">
                <div class="section-header">Frogs</div>
                <div class="item" onclick="addFrog('Green Frog', 0)">Green Frog (Gratis)</div>
                <div class="item" onclick="addFrog('Blue Frog', 50)">Blue Frog (50)</div>
                <div class="item" onclick="addFrog('Red Frog', 150)">Red Frog (150)</div>
                <div class="item" onclick="addFrog('Yellow Frog', 500)">Yellow Frog (500)</div>

                <div class="section-header">Hat Hangar</div>
                <div class="item" onclick="alert('Kommer snart!')">Leaf Hat (20)</div>
                <div class="item" onclick="alert('Kommer snart!')">Crown (100)</div>
            </div>

            <div id="tab-log" class="content" style="display: none;">
                <div class="section-header">Unlocked Frogs</div>
                <div id="log-list"></div>
            </div>
        </div>

        <div id="frog-layer"></div>
    </div>

<script>
    let clicks = 0;
    let frogs = [];
    let unlocked = new Set(['Green Frog']);
    let dragging = null;

    // Funksjon for √• bytte faner
    function showTab(tab) {
        document.getElementById('tab-shop').style.display = tab === 'shop' ? 'block' : 'none';
        document.getElementById('tab-log').style.display = tab === 'log' ? 'block' : 'none';
        document.getElementById('btn-shop').className = 'tab-btn' + (tab === 'shop' ? ' active' : '');
        document.getElementById('btn-log').className = 'tab-btn' + (tab === 'log' ? ' active' : '');
        if(tab === 'log') updateLogUI();
    }

    // Legge til frosk
    function addFrog(type, cost) {
        if (clicks >= cost) {
            clicks -= cost;
            const newFrog = {
                id: Date.now() + Math.random(),
                type: type,
                x: 300 + Math.random() * 200,
                y: 300 + Math.random() * 200,
                lvl: 1
            };
            frogs.push(newFrog);
            unlocked.add(type);
            updateStats();
            renderFrogs();
        } else {
            alert("Ikke nok clicks!");
        }
    }

    // Tegne alle frosker
    function renderFrogs() {
        const layer = document.getElementById('frog-layer');
        layer.innerHTML = '';
        
        frogs.forEach(f => {
            const div = document.createElement('div');
            div.className = 'frog';
            div.id = 'f-' + f.id;
            div.style.left = f.x + 'px';
            div.style.top = f.y + 'px';
            div.innerHTML = `üê∏<div class="lvl-tag">Lvl ${f.lvl}</div>`;

            // Touch-events for iPad
            div.addEventListener('touchstart', (e) => {
                dragging = f;
                div.style.transform = 'scale(1.2)';
            }, {passive: false});

            div.addEventListener('touchmove', (e) => {
                if (!dragging) return;
                const touch = e.touches[0];
                f.x = touch.clientX - 60;
                f.y = touch.clientY - 60;
                div.style.left = f.x + 'px';
                div.style.top = f.y + 'px';
            }, {passive: false});

            div.addEventListener('touchend', (e) => {
                div.style.transform = 'scale(1)';
                checkMerge(f);
                dragging = null;
            });

            // Klikk for poeng
            div.addEventListener('click', () => {
                clicks += f.lvl;
                updateStats();
            });

            layer.appendChild(div);
        });
    }

    // Sjekk om to frosker skal merges
    function checkMerge(f1) {
        const machine = document.getElementById('merge-zone').getBoundingClientRect();
        
        // Sjekk om f1 er i maskinen
        if (f1.x + 60 > machine.left && f1.x + 60 < machine.right &&
            f1.y + 60 > machine.top && f1.y + 60 < machine.bottom) {
            
            const target = frogs.find(f2 => 
                f2.id !== f1.id && 
                f2.type === f1.type && 
                f2.lvl === f1.lvl &&
                Math.abs(f1.x - f2.x) < 80 && 
                Math.abs(f1.y - f2.y) < 80
            );

            if (target) {
                frogs = frogs.filter(f => f.id !== f1.id && f.id !== target.id);
                addFrog(f1.type, 0); // Lager ny
                const ny = frogs[frogs.length - 1];
                ny.lvl = f1.lvl + 1; // Oppgraderer niv√•
                ny.x = machine.left + 80;
                ny.y = machine.top + 80;
                renderFrogs();
            }
        }
    }

    // Froske-hopping
    setInterval(() => {
        frogs.forEach(f => {
            if (dragging && dragging.id === f.id) return;
            // Hopp litt tilfeldig
            f.x += (Math.random() - 0.5) * 40;
            f.y += (Math.random() - 0.5) * 40;
            
            const el = document.getElementById('f-' + f.id);
            if (el) {
                el.style.left = f.x + 'px';
                el.style.top = f.y + 'px';
            }
        });
    }, 3000);

    function updateStats() { document.getElementById('count').innerText = clicks; }

    function updateLogUI() {
        const list = document.getElementById('log-list');
        list.innerHTML = '';
        ['Green Frog', 'Blue Frog', 'Red Frog', 'Yellow Frog'].forEach(type => {
            const div = document.createElement('div');
            div.style.padding = '10px';
            div.style.color = unlocked.has(type) ? '#2ecc71' : '#555';
            div.innerText = unlocked.has(type) ? '‚úì ' + type : '? Ukjent';
            list.appendChild(div);
        });
    }

    // Start med en frosk
    window.onload = () => { addFrog('Green Frog', 0); };
</script>
</body>
</html>
